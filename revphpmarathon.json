{
  "id": "revphp",
  "apps": [
    {
      "id": "redis",
      "container": {
        "type": "DOCKER",
        "docker": {
          "image": "redis",
          "network": "BRIDGE"
        }
      },
      "cpus": 1,
      "mem": 200.0,
      "instances": 1
    },
    {
      "id": "wordpress",
      "container": {
        "type": "DOCKER",
        "docker": {
          "image": "wordpress",
          "network": "BRIDGE",
          "portMappings": [{
            "containerPort": 80,
            "hostPort": 0,
            "protocol": "tcp"
          }]
        }
      },
      "env": {
        "SERVICE_NAME": "wordpress",
        "WORDPRESS_DB_HOST": "wordpress.mysql.service.consul:3306",
        "WORDPRESS_DB_USER": "wordpress",
        "WORDPRESS_DB_PASSWORD": "wordpress",
        "WORDPRESS_DB_NAME": "wordpress"
      },
      "cpus": 1,
      "mem": 256.0,
      "instances": 1,
      "healthChecks": [{
        "path": "/",
        "portIndex": 0,
        "protocol": "HTTP",
        "gracePeriodSeconds": 120,
        "intervalSeconds": 10,
        "timeoutSeconds": 20,
        "maxConsecutiveFailures": 3
      }],
      "dependencies": ["/wordpress/mysql"]
    }
  ]
}












{
  "id": "revphp",
  "cpus": 0.2,
  "mem": 20.0,
  "instances": 2,
  "constraints": [["hostname", "UNIQUE", ""]],
  "container": {
    "type": "DOCKER",
    "docker": {
      "image": "outyet",
      "network": "BRIDGE",
      "portMappings": [
        { "containerPort": 8080, "hostPort": 0, "servicePort": 0, "protocol": "tcp" }
      ]
    }
  },
  "healthChecks": [
    {
      "protocol": "HTTP",
      "portIndex": 0,
      "path": "/",
      "gracePeriodSeconds": 5,
      "intervalSeconds": 20,
      "maxConsecutiveFailures": 3
    }
  ]
}




{
      "name": "web",
      "links": [
        "redis"
      ],
      "image": "web",
      "essential": true,
      "portMappings": [
        {
          "containerPort": 80,
          "hostPort": 80
        }
      ],
      "memory": 300,
      "cpu": 10
    }
